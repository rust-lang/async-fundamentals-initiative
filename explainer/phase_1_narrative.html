<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Phase 1 narrative - async fn fundamentals initiative</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="../index.html">üëã Welcome</a></li><li class="chapter-item "><a href="../updates.html">‚úèÔ∏è Updates</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../updates/2021-oct.html">2021-Oct</a></li></ol></li><li class="chapter-item "><a href="../CHARTER.html">üìú Charter</a></li><li class="chapter-item "><a href="../stakeholders.html">üë™ Stakeholders</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../stakeholders/2021-nov.html">2021-Nov</a></li></ol></li><li class="chapter-item "><a href="../roadmap.html">üõ£ Roadmap</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../roadmap/static_async_trait.html">üí¨ Static async trait</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../roadmap/static_async_trait_mvp.html">MVP: Static async fn in traits</a></li></ol></li><li class="chapter-item "><a href="../roadmap/impl_trait_in_traits.html">üí¨ impl Trait in traits</a></li><li class="chapter-item "><a href="../roadmap/dyn_async_trait.html">üí¨ Dyn async trait</a></li><li class="chapter-item "><a href="../roadmap/dyn_trait.html">üí§ Dyn trait</a></li><li class="chapter-item "><a href="../roadmap/async_drop.html">üí§ Async drop</a></li><li class="chapter-item "><a href="../roadmap/async_closures.html">üí§ Async closures</a></li></ol></li><li class="chapter-item "><a href="../evaluation.html">üî¨ Evaluation</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../evaluation/executor-styles.html">Executor styles</a></li><li class="chapter-item "><a href="../evaluation/scenarios.html">Reference scenarios</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../evaluation/scenarios/background-logging.html">Background logging</a></li><li class="chapter-item "><a href="../evaluation/scenarios/implementing-async-read.html">Implementing AsyncRead</a></li></ol></li><li class="chapter-item "><a href="../evaluation/challenges.html">Challenges</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../evaluation/challenges/bounding_futures.html">Bounding futures</a></li><li class="chapter-item "><a href="../evaluation/challenges/naming_futures.html">Naming futures</a></li><li class="chapter-item "><a href="../evaluation/challenges/dyn_traits.html">Dyn traits</a></li><li class="chapter-item "><a href="../evaluation/challenges/bounding_async_drop.html">Bounding async drop</a></li><li class="chapter-item "><a href="../evaluation/challenges/guaranteeing_async_drop.html">Guaranteeing async drop</a></li><li class="chapter-item "><a href="../evaluation/challenges/implicit_await_with_async_drop.html">Implicit await with async drop</a></li></ol></li><li class="chapter-item "><a href="../evaluation/design.html">Design documents</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../evaluation/design/implied_send.html">Implied Send</a></li><li class="chapter-item "><a href="../evaluation/design/trait_multiplication.html">Trait multiplication</a></li><li class="chapter-item "><a href="../evaluation/design/inline_async_fn.html">Inline async fn</a></li><li class="chapter-item "><a href="../evaluation/design/custom_dyn_impls.html">Custom dyn impls</a></li><li class="chapter-item "><a href="../evaluation/design/auto_traits_consider_async_drop.html">Auto traits consider AsyncDrop</a></li><li class="chapter-item "><a href="../evaluation/design/simple_names.html">Simple names</a></li><li class="chapter-item "><a href="../evaluation/design/bound_items.html">Bound items</a></li><li class="chapter-item "><a href="../evaluation/design/with_clauses.html">With clauses</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../explainer.html">üìö Explainer</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../explainer/phase_1.html">Phase 1</a></li><li class="chapter-item expanded "><a href="../explainer/phase_1_narrative.html" class="active">Phase 1 narrative</a></li><li class="chapter-item "><a href="../explainer/phase_2.html">Phase 2</a></li><li class="chapter-item "><a href="../explainer/phase_3.html">Phase 3</a></li></ol></li><li class="chapter-item "><a href="../RFC.html">‚ú® RFC</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../RFC/static_async_fn_in_traits.html">Static async fn in traits</a></li></ol></li><li class="chapter-item "><a href="../FAQ.html">üòï FAQ</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">async fn fundamentals initiative</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/rust-lang/async-fundamentals-initiative" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/rust-lang/async-fundamentals-initiative/edit/master/./explainer/phase_1_narrative.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="async-fundamentals-mini-vision-doc"><a class="header" href="#async-fundamentals-mini-vision-doc">Async Fundamentals Mini Vision Doc</a></h1>
<p>Grace and Alan are working at BoggleyCorp, developing a network service using async I/O in Rust. Internally, they use a trait to manage http requests, which allows them to easily change to different sorts of providers:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>trait HttpRequestProvider {
    async fn request(&amp;mut self, request: Request) -&gt; anyhow::Result&lt;Response&gt;;
}
<span class="boring">}
</span></code></pre></pre>
<p>They start out using <code>impl HttpRequest</code> and things seem to be working very well:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>async fn process_request(
    mut provider: impl HttpRequestProvider,
    request: Request,
) -&gt; anyhow::Result&lt;()&gt; {
    let response = provider.request(request).await?;
    process_response(response).await;
}
<span class="boring">}
</span></code></pre></pre>
<p>As they refactor their system, though, they decide they would like to store the provider in a <code>Context</code> type. When they create the struct, though, they realize that <code>impl Trait</code> syntax doesn't work in that context:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Context {
   provider: impl HttpRequestProvider,
}

async fn process_request(
    mut provider: impl HttpRequestProvider,
    request: Request,
) -&gt; anyhow::Result&lt;()&gt; {
    let cx = Context { 
        provider
    };
    // ...
}
<span class="boring">}
</span></code></pre></pre>
<p>Alan looks to Grace, &quot;What do we do now?&quot; Grace says, &quot;Well, we could make an explicit type parameter, but I think a <code>dyn</code> might be easier for us here.&quot; Alan says, &quot;Oh, ok, that makes sense.&quot; He alters the struct to use a <code>Box&lt;dyn HttpRequestProvider&gt;</code>:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Context {
   provider: Box&lt;dyn HttpRequestProvider&gt;,
}
<span class="boring">}
</span></code></pre></pre>
<p>However, this gets a compilation error: &quot;traits that contain async fn are not dyn safe&quot;. The compiler does, however, suggest that they check out the experimental <a href="https://github.com/nikomatsakis/dyner"><code>dyner</code> crate</a>. The README for the crate advises them to decorate their trait with <code>dyner::make_dyn</code>, and to give a name to use for the &quot;dynamic dispatch&quot; type:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[dyner::make_dyn(DynHttpRequestProvider)]
trait HttpRequestProvider {
    async fn request(&amp;mut self, request: Request) -&gt; anyhow::Result&lt;Response&gt;;
}
<span class="boring">}
</span></code></pre></pre>
<p>Following the readme, they also modify their <code>Context</code> struct like so:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Context {
   provider: DynHttpRequestProvider&lt;'static&gt;,
}

async fn process_request(
    provider: impl HttpRequestProvider,
    request: Request,
) -&gt; anyhow::Result&lt;()&gt; {
    let cx = Context {
        provider: DynHttpRequestProvider::from(provider),
    };
    // ...
}
<span class="boring">}
</span></code></pre></pre>
<p>However, the code doesn't compile just as is. They realize that the <code>Context</code> is only being used inside <code>process_request</code> and so they follow the &quot;time-limited&quot; pattern of adding a lifetime parameter <code>'me</code> to the context. This represents the period of time in which the context is in use:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>struct Context&lt;'me&gt; {
   provider: DynHttpRequestProvider&lt;'me&gt;,
}

async fn process_request(
    provider: impl HttpRequestProvider,
    request: Request,
) -&gt; anyhow::Result&lt;()&gt; {
    let cx = Context {
        provider: DynHttpRequestProvider::from(provider),
    };
    // ...
}
<span class="boring">}
</span></code></pre></pre>
<p>At this point, they are able to invoke <code>provider.request()</code> as normal.</p>
<h3 id="spawning-tasks"><a class="header" href="#spawning-tasks">Spawning tasks</a></h3>
<p>As their project expands, Alan and Grace realize that they are going to have process a number of requests in parallel. They insert some code to spawn off tasks:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn process_all_requests(
    provider: impl HttpRequestProvider + Clone,
    requests: Vec&lt;RequestData&gt;,
) -&gt; anyhow::Result&lt;()&gt; {
    let handles =
        requests
            .into_iter()
            .map(|r| {
                let provider = provider.clone();
                tokio::spawn(async move {
                    process_request(provider, r).await;
                })
            })
            .collect();
    tokio::join_all(handles).await
}
<span class="boring">}
</span></code></pre></pre>
<p>However, when they write this, they get an error:</p>
<pre><code>error: future cannot be sent between threads safely
   --&gt; src/lib.rs:21:17
    |
21  |                 tokio::spawn(async move {
    |                 ^^^^^^^^^^^^ future created by async block is not `Send`
    |
note: captured value is not `Send`
   --&gt; src/lib.rs:22:37
    |
22  |                     process_request(provider, r).await;
    |                                     ^^^^^^^^ has type `impl HttpRequestProvider + Clone` which is not `Send`
note: required by a bound in `tokio::spawn`
   --&gt; /playground/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.13.0/src/task/spawn.rs:127:21
    |
127 |         T: Future + Send + 'static,
    |                     ^^^^ required by this bound in `tokio::spawn`
help: consider further restricting this bound
    |
13  |     provider: impl HttpRequestProvider + Clone + std::marker::Send,
    |                                                +++++++++++++++++++
</code></pre>
<p>&quot;Ah, right,&quot; thinks Alan. &quot;I need to add <code>Send</code> to show that the provider is something we can send to another thread.&quot;</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>async fn process_all_requests(
    provider: impl HttpRequestProvider + Clone + Send,
    //                                           ^^^^ added this
    requests: Vec&lt;Request&gt;,
) {
    ...
}
<span class="boring">}
</span></code></pre></pre>
<p>But when he adds that, he gets <em>another</em> error. This one is a bit more complex:</p>
<pre><code>error[E0277]: the future returned by `HttpRequestProvider::request` (invoked on `impl HttpRequestProvider + Clone + Send`) cannot be sent between threads safely
   --&gt; src/lib.rs:21:17
    |
21  |                 tokio::spawn(async move {
    |                 ^^^^^^^^^^^^ `&lt;impl HttpRequestProvider + Clone + Send as HttpRequestProvider&gt;::Request` cannot be sent between threads safely
    |
note: future is not `Send` as it awaits another future which is not `Send`
   --&gt; src/lib.rs:35:5
    |
35  |     let response = provider.request(request).await?;
    |                    ^^^^^^^^^^^^^^^^^^^^^^^^^ this future is not `Send`
note: required by a bound in `tokio::spawn`
   --&gt; /playground/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-1.13.0/src/task/spawn.rs:127:21
    |
127 |         T: Future + Send + 'static,
    |                     ^^^^ required by this bound in `tokio::spawn`
help: introduce a `provider: Send` bound to require this future to be send:
    |
13  ~     provider: impl HttpRequestProvider&lt;request: Send&gt; + Clone + Send,,
    |
</code></pre>
<p>Alan and Grace are a bit puzzled. They decide to to their friend Barbara, who knows Rust pretty well.</p>
<p>Barbara looks over the error. She explains to them that when they call an async function -- even in a trait -- that results in a future. &quot;Yeah, yeah&quot;, they say, &quot;we know that.&quot; Barbara explains that this means that saying that <code>provider</code> is <code>Send</code> does not necessarily imply that the future resulting from <code>provider.request()</code> is <code>Send</code>. &quot;Ah, that makes sense,&quot; says Alan. &quot;But what is this suggestion at the bottom?&quot;</p>
<p>&quot;Ah,&quot; says Barbara, &quot;the notation <code>T: Foo&lt;Bar: Send&gt;</code> generally means the same as <code>T: Foo, T::Bar: Send</code>. In other words, it says that <code>T</code> implements <code>Foo</code> and that the associated type <code>Bar</code> is <code>Send</code>.&quot;</p>
<p>&quot;Oh, I see,&quot; says Alan, &quot;I remember reading now that when we use an <code>async fn</code>, the compiler introduces an associated type with the same name as the function that represents the future that gets returned.&quot;</p>
<p>&quot;Right&quot;, answers Barbara. &quot;So when you say <code>impl HttpRequestProvider&lt;request: Send&gt;</code> that means that the <code>request</code> method returns a <code>Send</code> value (a future, in this case).&quot;</p>
<p>Alan and Grace change their project as the compiler suggested, and things start to work:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn process_all_requests(
    provider: impl HttpRequestProvider&lt;request: Send&gt; + Clone,
    requests: Vec&lt;RequestData&gt;,
) -&gt; anyhow::Result&lt;()&gt; {
    ...
}
<span class="boring">}
</span></code></pre></pre>
<h3 id="dyner-all-the-things-even-non-async-things"><a class="header" href="#dyner-all-the-things-even-non-async-things">Dyner all the things (even non-async things)</a></h3>
<p>As Alan and Grace get used to dyner, they start using it for all kinds of dynamic dispatch, including some code which is not async. It takes getting used to, but dyner has some definite advantages over the builtin Rust functionality, particularly if you use it everywhere. For example, you can use <code>dyner</code> with traits that have <code>self</code> methods and even methods which take and return <code>impl Trait</code> values (so long as those traits also use dyner, and they use the standard naming convention of prefixing the name of the trait with <code>Dyn</code>):</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// The dyner crate re-exports standard library traits, along
// with Dyn versions of them (e.g., DynIterator). You do have
// to ensure that the `Iterator` and `DynIterator` are reachable
// from the same path though:
use dyner::iter::{Iterator, DynIterator};

#[dyner::make_dyn(DynWidgetStream)]
trait WidgetTransform {
    fn transform(
        mut self, 
        //  ^^^^ not otherwise dyn safe
        w: impl Iterator&lt;Item = Widget&gt;,
        // ^^^^^^^^^^^^^ this would not ordinarily be dyn-safe
    ) -&gt; impl Iterator&lt;Item = Widget&gt;;
    //   ^^^^^^^^^^^^^ this would not ordinarily be dyn-safe
}
<span class="boring">}
</span></code></pre></pre>
<h3 id="dyn-trait-objects-for-third-party-traits"><a class="header" href="#dyn-trait-objects-for-third-party-traits">Dyn trait objects for third-party traits</a></h3>
<p>Using <code>dyner</code>, Alan and Barbara are basically unblocked. After a while, though, they hit a problem. One of their dependencies defines a trait that has no <code>dyn</code> equivalent (XXX realistic example?):</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// In crate parser
trait Parser {
    fn parse(&amp;mut self, input: &amp;str);
}
<span class="boring">}
</span></code></pre></pre>
<p>They are able to manage this by declaring the &quot;dyn&quot; type themselves. To do so, however, they have to copy and paste the trait definition, which is kind of annoying:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>mod parser {
    dyner::make_dyn_extern {
        trait parser::Parser {
            fn parse(&amp;mut self, input: &amp;str);
        }
    }
}
<span class="boring">}
</span></code></pre></pre>
<p>They can now use <code>crate::parser::{Parser, DynParser}</code> to get the trait and its Dyn equivalent; the <code>crate::parser::Parser</code> is a re-export. &quot;Ah, so that's how dyner re-exports the traits from libstd&quot;, Grace realizes.</p>
<h3 id="whats-missing"><a class="header" href="#whats-missing">What's missing?</a></h3>
<ul>
<li>Spawning and needing <code>Send</code> bounds</li>
<li>Appendix: how does dyner work?</li>
</ul>
<h3 id="xxx"><a class="header" href="#xxx">XXX</a></h3>
<ul>
<li>replacement for <code>where Self: Sized</code>?
<ul>
<li>a lot of those problems go away <em>but</em></li>
<li>we can also offer an explicit <code>#[optimization]</code> annotation:
<ul>
<li>causes the default version to be reproduced for dyn types and exempts the function from all limitations</li>
</ul>
</li>
</ul>
</li>
<li>inherent async fn</li>
<li><code>impl A + B</code>
<ul>
<li><code>DynerAB</code>-- we could even do that, right?</li>
</ul>
</li>
<li></li>
<li>https://docs.rs/hyper/0.14.14/hyper/body/trait.HttpBody.html</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../explainer/phase_1.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../explainer/phase_2.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../explainer/phase_1.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../explainer/phase_2.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
