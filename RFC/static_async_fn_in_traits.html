<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Static async fn in traits - async fn fundamentals initiative</title>
        <!-- Custom HTML head -->
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="../index.html">üëã Welcome</a></li><li class="chapter-item "><a href="../updates.html">‚úèÔ∏è Updates</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../updates/2021-oct.html">2021-Oct</a></li></ol></li><li class="chapter-item "><a href="../CHARTER.html">üìú Charter</a></li><li class="chapter-item "><a href="../stakeholders.html">üë™ Stakeholders</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../stakeholders/2021-11-19.html">Minutes from 2021-11-19 meeting</a></li></ol></li><li class="chapter-item "><a href="../roadmap.html">üõ£ Roadmap</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../roadmap/mvp.html">MVP: Static async fn in traits</a></li></ol></li><li class="chapter-item "><a href="../evaluation.html">üî¨ Evaluation</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../evaluation/executor-styles.html">Executor styles</a></li><li class="chapter-item "><a href="../evaluation/scenarios.html">Reference scenarios</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../evaluation/scenarios/background-logging.html">Background logging</a></li><li class="chapter-item "><a href="../evaluation/scenarios/implementing-async-read.html">Implementing AsyncRead</a></li></ol></li><li class="chapter-item "><a href="../evaluation/challenges.html">Challenges</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../evaluation/challenges/bounding_futures.html">Bounding futures</a></li><li class="chapter-item "><a href="../evaluation/challenges/naming_futures.html">Naming futures</a></li><li class="chapter-item "><a href="../evaluation/challenges/dyn_traits.html">Dyn traits</a></li><li class="chapter-item "><a href="../evaluation/challenges/bounding_async_drop.html">Bounding async drop</a></li><li class="chapter-item "><a href="../evaluation/challenges/guaranteeing_async_drop.html">Guaranteeing async drop</a></li><li class="chapter-item "><a href="../evaluation/challenges/implicit_await_with_async_drop.html">Implicit await with async drop</a></li></ol></li><li class="chapter-item "><a href="../evaluation/design.html">Design documents</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../evaluation/design/implied_send.html">Implied Send</a></li><li class="chapter-item "><a href="../evaluation/design/trait_multiplication.html">Trait multiplication</a></li><li class="chapter-item "><a href="../evaluation/design/inline_async_fn.html">Inline async fn</a></li><li class="chapter-item "><a href="../evaluation/design/custom_dyn_impls.html">Custom dyn impls</a></li><li class="chapter-item "><a href="../evaluation/design/auto_traits_consider_async_drop.html">Auto traits consider AsyncDrop</a></li><li class="chapter-item "><a href="../evaluation/design/simple_names.html">Simple names</a></li><li class="chapter-item "><a href="../evaluation/design/bound_items.html">Bound items</a></li><li class="chapter-item "><a href="../evaluation/design/with_clauses.html">With clauses</a></li></ol></li></ol></li><li class="chapter-item "><a href="../explainer.html">üìö Explainer</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../explainer/phase_1.html">Phase 1</a></li><li class="chapter-item "><a href="../explainer/phase_1_narrative.html">Phase 1 narrative</a></li><li class="chapter-item "><a href="../explainer/phase_2.html">Phase 2</a></li><li class="chapter-item "><a href="../explainer/phase_3.html">Phase 3</a></li></ol></li><li class="chapter-item expanded "><a href="../RFC.html">‚ú® RFC</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../RFC/static_async_fn_in_traits.html" class="active">Static async fn in traits</a></li></ol></li><li class="chapter-item "><a href="../design-discussions/index.html">üí¨ Design discussions</a><a class="toggle"><div>‚ù±</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../design-discussions/static_async_trait.html">üí¨ Static async trait</a></li><li class="chapter-item "><a href="../design-discussions/impl_trait_in_traits.html">üí¨ impl Trait in traits</a></li><li class="chapter-item "><a href="../design-discussions/dyn_async_trait.html">üí¨ Dyn async trait</a></li><li class="chapter-item "><a href="../design-discussions/dyn_trait.html">üí§ Dyn trait</a></li><li class="chapter-item "><a href="../design-discussions/async_drop.html">üí§ Async drop</a></li><li class="chapter-item "><a href="../design-discussions/async_closures.html">üí§ Async closures</a></li></ol></li><li class="chapter-item "><a href="../FAQ.html">üòï FAQ</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">async fn fundamentals initiative</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/rust-lang/async-fundamentals-initiative" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/rust-lang/async-fundamentals-initiative/edit/master/./RFC/static_async_fn_in_traits.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="draft-rfc-static-async-fn-in-traits"><a class="header" href="#draft-rfc-static-async-fn-in-traits">Draft RFC: Static async fn in traits</a></h1>
<blockquote>
<p>This is a <strong>draft RFC</strong> that will be submitted to the rust-lang/rfcs repository when it is ready.</p>
<p>Feedback welcome!</p>
</blockquote>
<ul>
<li>Feature Name: <code>async_fn_in_traits</code></li>
<li>Start Date: 2021-10-13</li>
<li>RFC PR: <a href="https://github.com/rust-lang/rfcs/pull/0000">rust-lang/rfcs#0000</a></li>
<li>Rust Issue: <a href="https://github.com/rust-lang/rust/issues/0000">rust-lang/rust#0000</a></li>
</ul>
<h1 id="summary"><a class="header" href="#summary">Summary</a></h1>
<p>Support <code>async fn</code> in traits that can be called via static dispatch. These will desugar to an anonymous associated type.</p>
<h1 id="motivation"><a class="header" href="#motivation">Motivation</a></h1>
<p>Async/await allows users to write asynchronous code much easier than they could before. However, it doesn't play nice with other core language features that make Rust the great language it is, like traits.</p>
<p>In this RFC we will begin the process of integrating these two features and smoothing over a wrinkle that async Rust users have been working around since async/await stabilized nearly 3 years ago.</p>
<h1 id="guide-level-explanation"><a class="header" href="#guide-level-explanation">Guide-level explanation</a></h1>
<p>You can write <code>async fn</code> in traits and trait impls. For example:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>trait Service {
    async fn request(&amp;self, key: i32) -&gt; Response;
}

struct MyService {
    db: Database
}

impl Service for MyService {
    async fn request(&amp;self, key: i32) -&gt; Response {
        Response {
            contents: self.db.query(key).await.to_string()
        }
    }
}
<span class="boring">}
</span></code></pre></pre>
<p>This is useful for writing generic async code.</p>
<p>Currently, if you use an <code>async fn</code> in a trait, that trait is not <code>dyn</code> safe. If you need to use dynamic dispatch combined with async functions, you can use the <a href="https://crates.io/crates/async-trait"><code>async-trait</code></a> crate. We expect to extend the language to support this use case in the future.</p>
<p>Note that if a function in a trait is written as an <code>async fn</code>, it must also be written as an <code>async fn</code> in your implementation of that trait. With the above trait, you could not write this:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Service for MyService {
    fn request(&amp;self, key: i32) -&gt; impl Future&lt;Output = Response&gt; {
        async {
            ...
        }
    }
}
<span class="boring">}
</span></code></pre></pre>
<p>Doing so will give you an &quot;expected async fn&quot; error. If you need to do this for some reason, you can use an associated type in the trait:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>trait Service {
    type RequestFut&lt;'a&gt;: Future&lt;Output = Response&gt;
    where
        Self: 'a;
    fn request(&amp;self, key: i32) -&gt; RequestFut;
}

impl Service for MyService {
    type RequestFut&lt;'a&gt; = impl Future + 'a
    where
        Self: 'a;
    fn request&lt;'a&gt;(&amp;'a self, key: i32) -&gt; RequestFut&lt;'a&gt; {
        async { ... }
    }
}
<span class="boring">}
</span></code></pre></pre>
<p>Note that in the impl we are setting the value of the associated type to <code>impl Future</code>, because async blocks produce unnameable opaque types. The associated type is also generic over a lifetime <code>'a</code>, which allows it to capture the <code>&amp;'a self</code> reference passed by the caller.</p>
<h1 id="reference-level-explanation"><a class="header" href="#reference-level-explanation">Reference-level explanation</a></h1>
<h2 id="new-syntax"><a class="header" href="#new-syntax">New syntax</a></h2>
<p>We introduce the <code>async fn</code> sugar into traits and impls. No changes to the grammar are needed because the Rust grammar already support this construction, but async functions result in compilation errors in later phases of the compiler.</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>trait Example {
    async fn method(&amp;self);
}

impl Example for ExampleType {
    async fn method(&amp;self);
}
<span class="boring">}
</span></code></pre></pre>
<h2 id="semantic-rules"><a class="header" href="#semantic-rules">Semantic rules</a></h2>
<p>When an async function is present in a trait or trait impl...</p>
<h3 id="the-trait-is-not-considered-dyn-safe"><a class="header" href="#the-trait-is-not-considered-dyn-safe">The trait is not considered dyn safe</a></h3>
<p>This limitation is expected to be lifted in future RFCs.</p>
<h3 id="both-the-trait-and-its-impls-must-use-async-syntax"><a class="header" href="#both-the-trait-and-its-impls-must-use-async-syntax">Both the trait and its impls must use <code>async</code> syntax</a></h3>
<p>It is not legal to use an async function in a trait and a &quot;desugared&quot; function in an impl.</p>
<h2 id="equivalent-desugaring"><a class="header" href="#equivalent-desugaring">Equivalent desugaring</a></h2>
<h3 id="trait"><a class="header" href="#trait">Trait</a></h3>
<p>Async functions in a trait desugar to an associated function that returns a generic associated type (GAT):</p>
<ul>
<li>Just as with <a href="https://rust-lang.github.io/rfcs/2394-async_await.html#lifetime-capture-in-the-anonymous-future">ordinary async functions</a>, the GAT has a generic parameter for every generic parameter that appears on the fn, along with implicit lifetime parameters.</li>
<li>The GAT has the complete set of where clauses that appear on the <code>fn</code>, including any implied bounds.</li>
<li>The GAT is &quot;anonymous&quot;, meaning that its name is an internal symbol that cannot be referred to directly. (In the examples, we will use <code>$</code> to represent this name.)</li>
</ul>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>trait Example {
    async fn method&lt;P0..Pn&gt;(&amp;self)
    where
        WC0..WCn;
}

// Becomes:

trait Example {
    type $&lt;'me, P0..Pn&gt;: Future&lt;Output = ()&gt;
    where
        WC0..WCn, // Explicit where clauses
        Self: 'me; // Implied bound from `&amp;self` parameter

    fn method(&amp;self) -&gt; Self::$&lt;'_&gt;
    where
        WC0..WCn;
}
<span class="boring">}
</span></code></pre></pre>
<p><code>async fn</code> that appear in impls are desugared in the same general way as an <a href="https://doc.rust-lang.org/reference/items/functions.html#async-functions">existing async function</a>, but with some slight differences:</p>
<ul>
<li>The value of the associated type <code>$</code> is equal to an <code>impl Future</code> type, rather than the <code>impl Future</code> being the return type of the function</li>
<li>The function returns a reference to <code>Self::$&lt;...&gt;</code> with all the appropriate generic parameters</li>
</ul>
<p>Otherwise, the desugaring is the same. The body of the function becomes an <code>async move { ... }</code> block that both (a) captures all parameters and (b) contains the body expression.</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Example for ExampleType {
    async fn method(&amp;self) {
        ...
    }
}

impl Example for ExampleType {
    type $&lt;'me, P0..Pn&gt; = impl Future&lt;Output = ()&gt; + 'me
    where
        WC0..WCn, // Explicit where clauses
        Self: 'me; // Implied bound from `&amp;self` parameter

    fn method(&amp;self) -&gt; Self::$&lt;'_, P0..Pn&gt; {
        async move { ... }
    }
}
<span class="boring">}
</span></code></pre></pre>
<h1 id="rationale-and-alternatives"><a class="header" href="#rationale-and-alternatives">Rationale and alternatives</a></h1>
<h2 id="why-are-we-adding-this-rfc-now"><a class="header" href="#why-are-we-adding-this-rfc-now">Why are we adding this RFC now?</a></h2>
<p>This RFC represents the least controversial addition to async/await that we could add right now. It was not added before due to limitations in the compiler that have now been lifted ‚Äì namely, support for <a href="https://github.com/rust-lang/generic-associated-types-initiative">Generic Associated Types</a> and <a href="https://github.com/rust-lang/rust/issues/63063">Type Alias Impl Trait</a>.</p>
<h2 id="why-are-the-result-traits-not-dyn-safe"><a class="header" href="#why-are-the-result-traits-not-dyn-safe">Why are the result traits not dyn safe?</a></h2>
<p>Supporting async fn and dyn is a complex topic -- you can read the details on the <a href="https://rust-lang.github.io/async-fundamentals-initiative/evaluation/challenges/dyn_traits.html">dyn traits</a> page of the async fundamentals evaluation doc.</p>
<h2 id="can-we-add-support-for-dyn-later"><a class="header" href="#can-we-add-support-for-dyn-later">Can we add support for dyn later?</a></h2>
<p>Yes, nothing in this RFC precludes us from making traits containing async functions dyn safe, presuming that we can overcome the obstacles inherent in the design space.</p>
<h2 id="what-are-users-using-today-and-why-dont-we-just-do-that"><a class="header" href="#what-are-users-using-today-and-why-dont-we-just-do-that">What are users using today and why don't we just do that?</a></h2>
<p>Users in the ecosystem have worked around the lack of support for this feature with the <a href="https://github.com/dtolnay/async-trait">async-trait</a> proc macro, which desugars into <code>Box&lt;dyn Future&gt;</code>s instead of anonymous associated types. This has the disadvantage of requiring users to use <code>Box&lt;dyn&gt;</code> along with all the <a href="https://rust-lang.github.io/wg-async-foundations/vision/submitted_stories/status_quo/barbara_benchmarks_async_trait.html">performance implications</a> of that, which prevent some use cases. It is also not suitable for users like <a href="https://github.com/embassy-rs/embassy">embassy</a>, which aim to support the &quot;no-std&quot; ecosystem. </p>
<h2 id="will-anyone-use-async-trait-crate-once-this-rfc-lands"><a class="header" href="#will-anyone-use-async-trait-crate-once-this-rfc-lands">Will anyone use async-trait crate once this RFC lands?</a></h2>
<p>The async-trait crate will continue to be useful after this RFC, because it allows traits to remain <code>dyn</code>-safe. This is a limitation in the current design that we plan to address in the future.</p>
<h1 id="prior-art"><a class="header" href="#prior-art">Prior art</a></h1>
<h2 id="the-async-trait-crate"><a class="header" href="#the-async-trait-crate">The <code>async-trait</code> crate</a></h2>
<p>The most common way to use <code>async fn</code> in traits is to use the <a href="https://crates.io/crates/async-trait"><code>async-trait</code></a> crate. This crate takes a different approach to the one described in this RFC. Async functions are converted into ordinary trait functions that return <code>Box&lt;dyn Future&gt;</code> rather than using an associated type. This means that the resulting traits are dyn safe and avoids a dependency on generic associated types, but it also has two downsides:</p>
<ul>
<li>Requires a box allocation on every trait function call; while this is often no big deal, it can be prohibitive for some applications.</li>
<li>Requires the trait to state up front whether the resulting futures are <code>Send</code> or not. The <a href="https://crates.io/crates/async-trait"><code>async-trait</code></a> crate defaults to <code>Send</code> and users write <code>#[async_trait(?Send)]</code> to disable this default.</li>
</ul>
<p>Since the async function support in this RFC means that traits are not dyn safe, we do not expect it to completely displace uses of the <code>#[async_trait]</code> crate.</p>
<h2 id="the-real-async-trait-crate"><a class="header" href="#the-real-async-trait-crate">The real-async-trait crate</a></h2>
<p>The <a href="https://crates.io/crates/real-async-trait"><code>real-async-trait</code></a> lowers <code>async fn</code> to use GATs and impl Trait, roughly as described in this RFC.</p>
<h1 id="unresolved-questions"><a class="header" href="#unresolved-questions">Unresolved questions</a></h1>
<ul>
<li>What parts of the design do you expect to resolve through the RFC process before this gets merged?</li>
<li>What parts of the design do you expect to resolve through the implementation of this feature before stabilization?</li>
<li>What related issues do you consider out of scope for this RFC that could be addressed in the future independently of the solution that comes out of this RFC?</li>
</ul>
<h1 id="future-possibilities"><a class="header" href="#future-possibilities">Future possibilities</a></h1>
<h2 id="dyn-compatibility"><a class="header" href="#dyn-compatibility">Dyn compatibility</a></h2>
<p>It is not a breaking change for traits to become dyn safe. We expect to make traits with async functions dyn safe, but doing so requires overcoming a number of interesting challenges, as described in the <a href="https://rust-lang.github.io/async-fundamentals-initiative/evaluation.html">async fundamentals evaluation doc</a>. </p>
<h2 id="impl-trait-in-traits"><a class="header" href="#impl-trait-in-traits">Impl trait in traits</a></h2>
<p>The <a href="https://rust-lang.github.io/impl-trait-initiative/">impl trait initiative</a> is expecting to propose &quot;impl trait in traits&quot; (see the <a href="https://rust-lang.github.io/impl-trait-initiative/explainer/rpit_trait.html">explainer</a> for a brief summary). This RFC is compatible with the proposed design.</p>
<h2 id="ability-to-name-the-type-of-the-returned-future"><a class="header" href="#ability-to-name-the-type-of-the-returned-future">Ability to name the type of the returned future</a></h2>
<p>This RFC does not propose any means to name the future that results from an <code>async fn</code>. That is expected to be covered in a future RFC from the <a href="https://rust-lang.github.io/impl-trait-initiative/">impl trait initiative</a>; you can read more about the <a href="https://rust-lang.github.io/impl-trait-initiative/explainer/rpit_names.html">proposed design</a> in the explainer.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../RFC.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="../design-discussions/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../RFC.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="../design-discussions/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
